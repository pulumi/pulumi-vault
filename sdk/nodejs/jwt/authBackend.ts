// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as inputs from "../types/input";
import * as outputs from "../types/output";
import * as utilities from "../utilities";

/**
 * ## Import
 *
 * JWT auth backend can be imported using the `path`, e.g.
 *
 * ```sh
 * $ pulumi import vault:jwt/authBackend:AuthBackend oidc oidc
 * ```
 * or
 *
 * ```sh
 * $ pulumi import vault:jwt/authBackend:AuthBackend jwt jwt
 * ```
 */
export class AuthBackend extends pulumi.CustomResource {
    /**
     * Get an existing AuthBackend resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: AuthBackendState, opts?: pulumi.CustomResourceOptions): AuthBackend {
        return new AuthBackend(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'vault:jwt/authBackend:AuthBackend';

    /**
     * Returns true if the given object is an instance of AuthBackend.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is AuthBackend {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === AuthBackend.__pulumiType;
    }

    /**
     * The accessor for this auth method
     */
    declare public /*out*/ readonly accessor: pulumi.Output<string>;
    /**
     * The value against which to match the iss claim in a JWT
     */
    declare public readonly boundIssuer: pulumi.Output<string | undefined>;
    /**
     * The default role to use if none is provided during login
     */
    declare public readonly defaultRole: pulumi.Output<string | undefined>;
    /**
     * The description of the auth backend
     */
    declare public readonly description: pulumi.Output<string | undefined>;
    /**
     * If set, opts out of mount migration on path updates.
     * See here for more info on [Mount Migration](https://www.vaultproject.io/docs/concepts/mount-migration)
     */
    declare public readonly disableRemount: pulumi.Output<boolean | undefined>;
    /**
     * The CA certificate or chain of certificates, in PEM format, to use to validate connections to the JWKS URL. If not set, system certificates are used.
     */
    declare public readonly jwksCaPem: pulumi.Output<string | undefined>;
    /**
     * List of JWKS URL and optional CA certificate pairs. Cannot be used with `jwksUrl` or `jwksCaPem`. Requires Vault 1.16+.
     */
    declare public readonly jwksPairs: pulumi.Output<{[key: string]: string}[] | undefined>;
    /**
     * JWKS URL to use to authenticate signatures. Cannot be used with "oidcDiscoveryUrl" or "jwtValidationPubkeys".
     */
    declare public readonly jwksUrl: pulumi.Output<string | undefined>;
    /**
     * A list of supported signing algorithms. Vault 1.1.0 defaults to [RS256] but future or past versions of Vault may differ
     */
    declare public readonly jwtSupportedAlgs: pulumi.Output<string[] | undefined>;
    /**
     * A list of PEM-encoded public keys to use to authenticate signatures locally. Cannot be used in combination with `oidcDiscoveryUrl`
     */
    declare public readonly jwtValidationPubkeys: pulumi.Output<string[] | undefined>;
    /**
     * Specifies if the auth method is local only.
     */
    declare public readonly local: pulumi.Output<boolean | undefined>;
    /**
     * The namespace to provision the resource in.
     * The value should not contain leading or trailing forward slashes.
     * The `namespace` is always relative to the provider's configured [namespace](https://www.terraform.io/docs/providers/vault/index.html#namespace).
     * *Available only for Vault Enterprise*.
     */
    declare public readonly namespace: pulumi.Output<string | undefined>;
    /**
     * Pass namespace in the OIDC state parameter instead of as a separate query parameter. With this setting, the allowed redirect URL(s) in Vault and on the provider side should not contain a namespace query parameter. This means only one redirect URL entry needs to be maintained on the OIDC provider side for all vault namespaces that will be authenticating against it. Defaults to true for new configs
     *
     * * tune - (Optional) Extra configuration block. Structure is documented below.
     *
     * The `tune` block is used to tune the auth backend:
     */
    declare public readonly namespaceInState: pulumi.Output<boolean | undefined>;
    /**
     * Client ID used for OIDC backends
     */
    declare public readonly oidcClientId: pulumi.Output<string | undefined>;
    /**
     * Client Secret used for OIDC backends. **Note:** This field is stored in state. For enhanced security, use `oidcClientSecretWo` instead.
     */
    declare public readonly oidcClientSecret: pulumi.Output<string | undefined>;
    /**
     * **NOTE:** This field is write-only and its value will not be updated in state as part of read operations.
     * Write-only Client Secret used for OIDC. This field is recommended over oidcClientSecret for enhanced security.
     */
    declare public readonly oidcClientSecretWo: pulumi.Output<string | undefined>;
    /**
     * Version counter for the write-only `oidcClientSecretWo` field. Increment this value to trigger an update of the client secret in Vault. Required when using `oidcClientSecretWo`.
     */
    declare public readonly oidcClientSecretWoVersion: pulumi.Output<number | undefined>;
    /**
     * The CA certificate or chain of certificates, in PEM format, to use to validate connections to the OIDC Discovery URL. If not set, system certificates are used
     */
    declare public readonly oidcDiscoveryCaPem: pulumi.Output<string | undefined>;
    /**
     * The OIDC Discovery URL, without any .well-known component (base path). Cannot be used in combination with `jwtValidationPubkeys`
     */
    declare public readonly oidcDiscoveryUrl: pulumi.Output<string | undefined>;
    /**
     * The response mode to be used in the OAuth2 request. Allowed values are `query` and `formPost`. Defaults to `query`. If using Vault namespaces, and `oidcResponseMode` is `formPost`, then `namespaceInState` should be set to `false`.
     */
    declare public readonly oidcResponseMode: pulumi.Output<string | undefined>;
    /**
     * List of response types to request. Allowed values are 'code' and 'id_token'. Defaults to `["code"]`. Note: `idToken` may only be used if `oidcResponseMode` is set to `formPost`.
     */
    declare public readonly oidcResponseTypes: pulumi.Output<string[] | undefined>;
    /**
     * Path to mount the JWT/OIDC auth backend
     */
    declare public readonly path: pulumi.Output<string | undefined>;
    /**
     * Provider specific handling configuration. All values may be strings, and the provider will convert to the appropriate type when configuring Vault.
     */
    declare public readonly providerConfig: pulumi.Output<{[key: string]: string} | undefined>;
    declare public readonly tune: pulumi.Output<outputs.jwt.AuthBackendTune>;
    /**
     * Type of auth backend. Should be one of `jwt` or `oidc`. Default - `jwt`
     */
    declare public readonly type: pulumi.Output<string | undefined>;

    /**
     * Create a AuthBackend resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args?: AuthBackendArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: AuthBackendArgs | AuthBackendState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as AuthBackendState | undefined;
            resourceInputs["accessor"] = state?.accessor;
            resourceInputs["boundIssuer"] = state?.boundIssuer;
            resourceInputs["defaultRole"] = state?.defaultRole;
            resourceInputs["description"] = state?.description;
            resourceInputs["disableRemount"] = state?.disableRemount;
            resourceInputs["jwksCaPem"] = state?.jwksCaPem;
            resourceInputs["jwksPairs"] = state?.jwksPairs;
            resourceInputs["jwksUrl"] = state?.jwksUrl;
            resourceInputs["jwtSupportedAlgs"] = state?.jwtSupportedAlgs;
            resourceInputs["jwtValidationPubkeys"] = state?.jwtValidationPubkeys;
            resourceInputs["local"] = state?.local;
            resourceInputs["namespace"] = state?.namespace;
            resourceInputs["namespaceInState"] = state?.namespaceInState;
            resourceInputs["oidcClientId"] = state?.oidcClientId;
            resourceInputs["oidcClientSecret"] = state?.oidcClientSecret;
            resourceInputs["oidcClientSecretWo"] = state?.oidcClientSecretWo;
            resourceInputs["oidcClientSecretWoVersion"] = state?.oidcClientSecretWoVersion;
            resourceInputs["oidcDiscoveryCaPem"] = state?.oidcDiscoveryCaPem;
            resourceInputs["oidcDiscoveryUrl"] = state?.oidcDiscoveryUrl;
            resourceInputs["oidcResponseMode"] = state?.oidcResponseMode;
            resourceInputs["oidcResponseTypes"] = state?.oidcResponseTypes;
            resourceInputs["path"] = state?.path;
            resourceInputs["providerConfig"] = state?.providerConfig;
            resourceInputs["tune"] = state?.tune;
            resourceInputs["type"] = state?.type;
        } else {
            const args = argsOrState as AuthBackendArgs | undefined;
            resourceInputs["boundIssuer"] = args?.boundIssuer;
            resourceInputs["defaultRole"] = args?.defaultRole;
            resourceInputs["description"] = args?.description;
            resourceInputs["disableRemount"] = args?.disableRemount;
            resourceInputs["jwksCaPem"] = args?.jwksCaPem;
            resourceInputs["jwksPairs"] = args?.jwksPairs;
            resourceInputs["jwksUrl"] = args?.jwksUrl;
            resourceInputs["jwtSupportedAlgs"] = args?.jwtSupportedAlgs;
            resourceInputs["jwtValidationPubkeys"] = args?.jwtValidationPubkeys;
            resourceInputs["local"] = args?.local;
            resourceInputs["namespace"] = args?.namespace;
            resourceInputs["namespaceInState"] = args?.namespaceInState;
            resourceInputs["oidcClientId"] = args?.oidcClientId;
            resourceInputs["oidcClientSecret"] = args?.oidcClientSecret ? pulumi.secret(args.oidcClientSecret) : undefined;
            resourceInputs["oidcClientSecretWo"] = args?.oidcClientSecretWo ? pulumi.secret(args.oidcClientSecretWo) : undefined;
            resourceInputs["oidcClientSecretWoVersion"] = args?.oidcClientSecretWoVersion;
            resourceInputs["oidcDiscoveryCaPem"] = args?.oidcDiscoveryCaPem;
            resourceInputs["oidcDiscoveryUrl"] = args?.oidcDiscoveryUrl;
            resourceInputs["oidcResponseMode"] = args?.oidcResponseMode;
            resourceInputs["oidcResponseTypes"] = args?.oidcResponseTypes;
            resourceInputs["path"] = args?.path;
            resourceInputs["providerConfig"] = args?.providerConfig;
            resourceInputs["tune"] = args?.tune;
            resourceInputs["type"] = args?.type;
            resourceInputs["accessor"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        const secretOpts = { additionalSecretOutputs: ["oidcClientSecret", "oidcClientSecretWo"] };
        opts = pulumi.mergeOptions(opts, secretOpts);
        super(AuthBackend.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering AuthBackend resources.
 */
export interface AuthBackendState {
    /**
     * The accessor for this auth method
     */
    accessor?: pulumi.Input<string>;
    /**
     * The value against which to match the iss claim in a JWT
     */
    boundIssuer?: pulumi.Input<string>;
    /**
     * The default role to use if none is provided during login
     */
    defaultRole?: pulumi.Input<string>;
    /**
     * The description of the auth backend
     */
    description?: pulumi.Input<string>;
    /**
     * If set, opts out of mount migration on path updates.
     * See here for more info on [Mount Migration](https://www.vaultproject.io/docs/concepts/mount-migration)
     */
    disableRemount?: pulumi.Input<boolean>;
    /**
     * The CA certificate or chain of certificates, in PEM format, to use to validate connections to the JWKS URL. If not set, system certificates are used.
     */
    jwksCaPem?: pulumi.Input<string>;
    /**
     * List of JWKS URL and optional CA certificate pairs. Cannot be used with `jwksUrl` or `jwksCaPem`. Requires Vault 1.16+.
     */
    jwksPairs?: pulumi.Input<pulumi.Input<{[key: string]: pulumi.Input<string>}>[]>;
    /**
     * JWKS URL to use to authenticate signatures. Cannot be used with "oidcDiscoveryUrl" or "jwtValidationPubkeys".
     */
    jwksUrl?: pulumi.Input<string>;
    /**
     * A list of supported signing algorithms. Vault 1.1.0 defaults to [RS256] but future or past versions of Vault may differ
     */
    jwtSupportedAlgs?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * A list of PEM-encoded public keys to use to authenticate signatures locally. Cannot be used in combination with `oidcDiscoveryUrl`
     */
    jwtValidationPubkeys?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Specifies if the auth method is local only.
     */
    local?: pulumi.Input<boolean>;
    /**
     * The namespace to provision the resource in.
     * The value should not contain leading or trailing forward slashes.
     * The `namespace` is always relative to the provider's configured [namespace](https://www.terraform.io/docs/providers/vault/index.html#namespace).
     * *Available only for Vault Enterprise*.
     */
    namespace?: pulumi.Input<string>;
    /**
     * Pass namespace in the OIDC state parameter instead of as a separate query parameter. With this setting, the allowed redirect URL(s) in Vault and on the provider side should not contain a namespace query parameter. This means only one redirect URL entry needs to be maintained on the OIDC provider side for all vault namespaces that will be authenticating against it. Defaults to true for new configs
     *
     * * tune - (Optional) Extra configuration block. Structure is documented below.
     *
     * The `tune` block is used to tune the auth backend:
     */
    namespaceInState?: pulumi.Input<boolean>;
    /**
     * Client ID used for OIDC backends
     */
    oidcClientId?: pulumi.Input<string>;
    /**
     * Client Secret used for OIDC backends. **Note:** This field is stored in state. For enhanced security, use `oidcClientSecretWo` instead.
     */
    oidcClientSecret?: pulumi.Input<string>;
    /**
     * **NOTE:** This field is write-only and its value will not be updated in state as part of read operations.
     * Write-only Client Secret used for OIDC. This field is recommended over oidcClientSecret for enhanced security.
     */
    oidcClientSecretWo?: pulumi.Input<string>;
    /**
     * Version counter for the write-only `oidcClientSecretWo` field. Increment this value to trigger an update of the client secret in Vault. Required when using `oidcClientSecretWo`.
     */
    oidcClientSecretWoVersion?: pulumi.Input<number>;
    /**
     * The CA certificate or chain of certificates, in PEM format, to use to validate connections to the OIDC Discovery URL. If not set, system certificates are used
     */
    oidcDiscoveryCaPem?: pulumi.Input<string>;
    /**
     * The OIDC Discovery URL, without any .well-known component (base path). Cannot be used in combination with `jwtValidationPubkeys`
     */
    oidcDiscoveryUrl?: pulumi.Input<string>;
    /**
     * The response mode to be used in the OAuth2 request. Allowed values are `query` and `formPost`. Defaults to `query`. If using Vault namespaces, and `oidcResponseMode` is `formPost`, then `namespaceInState` should be set to `false`.
     */
    oidcResponseMode?: pulumi.Input<string>;
    /**
     * List of response types to request. Allowed values are 'code' and 'id_token'. Defaults to `["code"]`. Note: `idToken` may only be used if `oidcResponseMode` is set to `formPost`.
     */
    oidcResponseTypes?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Path to mount the JWT/OIDC auth backend
     */
    path?: pulumi.Input<string>;
    /**
     * Provider specific handling configuration. All values may be strings, and the provider will convert to the appropriate type when configuring Vault.
     */
    providerConfig?: pulumi.Input<{[key: string]: pulumi.Input<string>}>;
    tune?: pulumi.Input<inputs.jwt.AuthBackendTune>;
    /**
     * Type of auth backend. Should be one of `jwt` or `oidc`. Default - `jwt`
     */
    type?: pulumi.Input<string>;
}

/**
 * The set of arguments for constructing a AuthBackend resource.
 */
export interface AuthBackendArgs {
    /**
     * The value against which to match the iss claim in a JWT
     */
    boundIssuer?: pulumi.Input<string>;
    /**
     * The default role to use if none is provided during login
     */
    defaultRole?: pulumi.Input<string>;
    /**
     * The description of the auth backend
     */
    description?: pulumi.Input<string>;
    /**
     * If set, opts out of mount migration on path updates.
     * See here for more info on [Mount Migration](https://www.vaultproject.io/docs/concepts/mount-migration)
     */
    disableRemount?: pulumi.Input<boolean>;
    /**
     * The CA certificate or chain of certificates, in PEM format, to use to validate connections to the JWKS URL. If not set, system certificates are used.
     */
    jwksCaPem?: pulumi.Input<string>;
    /**
     * List of JWKS URL and optional CA certificate pairs. Cannot be used with `jwksUrl` or `jwksCaPem`. Requires Vault 1.16+.
     */
    jwksPairs?: pulumi.Input<pulumi.Input<{[key: string]: pulumi.Input<string>}>[]>;
    /**
     * JWKS URL to use to authenticate signatures. Cannot be used with "oidcDiscoveryUrl" or "jwtValidationPubkeys".
     */
    jwksUrl?: pulumi.Input<string>;
    /**
     * A list of supported signing algorithms. Vault 1.1.0 defaults to [RS256] but future or past versions of Vault may differ
     */
    jwtSupportedAlgs?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * A list of PEM-encoded public keys to use to authenticate signatures locally. Cannot be used in combination with `oidcDiscoveryUrl`
     */
    jwtValidationPubkeys?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Specifies if the auth method is local only.
     */
    local?: pulumi.Input<boolean>;
    /**
     * The namespace to provision the resource in.
     * The value should not contain leading or trailing forward slashes.
     * The `namespace` is always relative to the provider's configured [namespace](https://www.terraform.io/docs/providers/vault/index.html#namespace).
     * *Available only for Vault Enterprise*.
     */
    namespace?: pulumi.Input<string>;
    /**
     * Pass namespace in the OIDC state parameter instead of as a separate query parameter. With this setting, the allowed redirect URL(s) in Vault and on the provider side should not contain a namespace query parameter. This means only one redirect URL entry needs to be maintained on the OIDC provider side for all vault namespaces that will be authenticating against it. Defaults to true for new configs
     *
     * * tune - (Optional) Extra configuration block. Structure is documented below.
     *
     * The `tune` block is used to tune the auth backend:
     */
    namespaceInState?: pulumi.Input<boolean>;
    /**
     * Client ID used for OIDC backends
     */
    oidcClientId?: pulumi.Input<string>;
    /**
     * Client Secret used for OIDC backends. **Note:** This field is stored in state. For enhanced security, use `oidcClientSecretWo` instead.
     */
    oidcClientSecret?: pulumi.Input<string>;
    /**
     * **NOTE:** This field is write-only and its value will not be updated in state as part of read operations.
     * Write-only Client Secret used for OIDC. This field is recommended over oidcClientSecret for enhanced security.
     */
    oidcClientSecretWo?: pulumi.Input<string>;
    /**
     * Version counter for the write-only `oidcClientSecretWo` field. Increment this value to trigger an update of the client secret in Vault. Required when using `oidcClientSecretWo`.
     */
    oidcClientSecretWoVersion?: pulumi.Input<number>;
    /**
     * The CA certificate or chain of certificates, in PEM format, to use to validate connections to the OIDC Discovery URL. If not set, system certificates are used
     */
    oidcDiscoveryCaPem?: pulumi.Input<string>;
    /**
     * The OIDC Discovery URL, without any .well-known component (base path). Cannot be used in combination with `jwtValidationPubkeys`
     */
    oidcDiscoveryUrl?: pulumi.Input<string>;
    /**
     * The response mode to be used in the OAuth2 request. Allowed values are `query` and `formPost`. Defaults to `query`. If using Vault namespaces, and `oidcResponseMode` is `formPost`, then `namespaceInState` should be set to `false`.
     */
    oidcResponseMode?: pulumi.Input<string>;
    /**
     * List of response types to request. Allowed values are 'code' and 'id_token'. Defaults to `["code"]`. Note: `idToken` may only be used if `oidcResponseMode` is set to `formPost`.
     */
    oidcResponseTypes?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Path to mount the JWT/OIDC auth backend
     */
    path?: pulumi.Input<string>;
    /**
     * Provider specific handling configuration. All values may be strings, and the provider will convert to the appropriate type when configuring Vault.
     */
    providerConfig?: pulumi.Input<{[key: string]: pulumi.Input<string>}>;
    tune?: pulumi.Input<inputs.jwt.AuthBackendTune>;
    /**
     * Type of auth backend. Should be one of `jwt` or `oidc`. Default - `jwt`
     */
    type?: pulumi.Input<string>;
}
